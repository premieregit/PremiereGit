<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora de Story Points</title>
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      color-scheme: dark;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #1f2937, #020617 55%);
      color: #e5e7eb;
    }

    .app {
      width: 100%;
      max-width: 1080px;
      padding: 24px;
      box-sizing: border-box;
    }

    .card {
      background: rgba(15, 23, 42, 0.9);
      border-radius: 16px;
      padding: 24px 24px 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.35);
      border: 1px solid rgba(148, 163, 184, 0.25);
      backdrop-filter: blur(12px);
    }

    .title {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 13px;
      color: #9ca3af;
      margin-bottom: 20px;
    }

    .legend {
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(148, 163, 184, 0.25);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
    }

    .legend h3 {
      margin: 0 0 8px;
      font-size: 15px;
      font-weight: 600;
    }

    .legend p {
      margin: 0 0 10px;
      color: #9ca3af;
      font-size: 13px;
    }

    .legend table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }

    .legend-table-wrapper {
      overflow-x: auto;
    }

    .legend th,
    .legend td {
      padding: 8px 10px;
      text-align: left;
      border-bottom: 1px solid rgba(148, 163, 184, 0.15);
    }

    .legend th {
      color: #cbd5e1;
      font-weight: 600;
      white-space: nowrap;
    }

    .legend td {
      color: #e5e7eb;
    }

    .questions {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-bottom: 18px;
    }

    .question {
      padding: 14px 16px;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      gap: 8px;
    }

    .question-title {
      font-size: 14px;
      font-weight: 500;
    }

    .question-tag {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
      background: rgba(31, 41, 55, 0.9);
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.8);
      white-space: nowrap;
    }

    .options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 4px;
    }

    .option-btn {
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(17, 24, 39, 0.9);
      color: #e5e7eb;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all 0.15s ease-out;
    }

    .option-btn span.value {
      font-weight: 600;
      font-size: 13px;
      min-width: 20px;
      text-align: center;
    }

    .option-btn span.label {
      color: #9ca3af;
    }

    .option-btn:hover {
      border-color: #818cf8;
      transform: translateY(-1px);
      box-shadow: 0 6px 12px rgba(15, 23, 42, 0.7);
    }

    .option-btn.selected {
      background: linear-gradient(135deg, #4f46e5, #8b5cf6);
      border-color: transparent;
      color: white;
      box-shadow: 0 8px 18px rgba(79, 70, 229, 0.55);
    }

    .option-btn.selected span.label {
      color: #e5e7eb;
    }

    .footer {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-top: 10px;
      font-size: 13px;
    }

    .summary {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .summary-line {
      color: #9ca3af;
    }

    .summary-value {
      font-size: 20px;
      font-weight: 600;
      color: #fbbf24;
    }

    .btn-primary {
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 13px;
      border: none;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #052e16;
      cursor: pointer;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 10px 20px rgba(34, 197, 94, 0.4);
      transition: transform 0.1s ease-out, box-shadow 0.1s ease-out,
        filter 0.1s ease-out;
    }

    .btn-primary:active {
      transform: translateY(1px);
      box-shadow: 0 4px 10px rgba(34, 197, 94, 0.3);
      filter: brightness(0.96);
    }

    .hint {
      font-size: 11px;
      color: #6b7280;
      margin-top: 2px;
    }

    @media (max-width: 640px) {
      .card {
        padding: 18px 16px 16px;
      }
      .options {
        flex-direction: row;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <div class="title">Calculadora de Story Points</div>
      <div class="subtitle">
        Para cada dimensão, escolha um valor Fibonacci. No final, a média será
        <strong>numérica</strong> (não forçada para Fibonacci).
      </div>

      <div class="legend" aria-label="Legenda de referência da escala Fibonacci">
        <h3>Legenda dos Story Points (referência visual)</h3>
        <p>
          Resumo da imagem de referência: o significado de cada ponto por
          dimensão avaliada.
        </p>
        <div class="legend-table-wrapper">
          <table>
            <thead>
              <tr>
                <th>SP</th>
                <th>Dimensão / Escopo</th>
                <th>Complexidade Técnica</th>
                <th>Conhecimento / Incerteza</th>
                <th>Risco (Obstáculos / dependências)</th>
                <th>Ação Recomendada</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td>Mínimo; item de referência (baseline).</td>
                <td>Muito baixa (ex: Fixar um erro de digitação)</td>
                <td>Alto (total familiaridade).</td>
                <td>Quase nulo / baixo.</td>
                <td>Usado para calibrar estimativas futuras.</td>
              </tr>
              <tr>
                <td>2</td>
                <td>Muito pequeno, poucas dependências.</td>
                <td>Baixa, poucas dependências.</td>
                <td>Razoável.</td>
                <td>Baixo.</td>
                <td>Necessário para ajustar baseline.</td>
              </tr>
              <tr>
                <td>3</td>
                <td>
                  Pequeno; esforço moderado, com alguma dependência (ex.: login
                  com validação).
                </td>
                <td>Moderada; lógica previsível.</td>
                <td>Pequenos desconhecidos possíveis.</td>
                <td>Moderado.</td>
                <td>Bom para esforço moderado.</td>
              </tr>
              <tr>
                <td>5</td>
                <td>Médio; esforço significativo.</td>
                <td>Necessário design que envolve lógica dinâmica.</td>
                <td>Algumas lacunas de conhecimento.</td>
                <td>Presente; probabilidade de dependências.</td>
                <td>Requer boa definição para seguir.</td>
              </tr>
              <tr>
                <td>8</td>
                <td>Grande; volume considerável de trabalho.</td>
                <td>Alta; requer coordenação ou lógica crítica.</td>
                <td>Alta; integra desconhecidos.</td>
                <td>Risco crítico; indica instabilidade e perda de controle de prazo.</td>
                <td>Exige maior atenção sobre a saúde do projeto.</td>
              </tr>
              <tr>
                <td>13</td>
                <td>Muito grande.</td>
                <td>Compromete sequências de épicos.</td>
                <td>Alto; incertezas com a equipe.</td>
                <td>Risco alto; indicativo de refino em ítens menores.</td>
                <td>Refinamento de histórias em paralelo.</td>
              </tr>
              <tr>
                <td>21</td>
                <td>Extenso; abrange múltiplos sprints.</td>
                <td>Enorme complexidade entre equipes.</td>
                <td>Risco extremo; incertezas distribuídas.</td>
                <td>Risco extremo; exige equipe experiente e dedicada.</td>
                <td>Metas estratégicas e esforços longos.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="questions" id="questions"></div>

      <div class="footer">
        <div class="summary">
          <div class="summary-line" id="status">
            Selecione um valor para cada dimensão.
          </div>
          <div class="summary-value" id="average">–</div>
          <div class="hint">
            Dica: você pode favoritar este arquivo como um atalho no Chrome.
          </div>
        </div>
        <button class="btn-primary" id="btn-calc">
          Calcular média
          <span aria-hidden="true">➜</span>
        </button>
      </div>
    </div>
  </div>

  <script>
    // Configuração
    const fibValues = [1, 2, 3, 5, 8, 13, 21];

    const questions = [
      {
        title: "Dimensão / Escopo (volume de trabalho)",
        tag: "Volume",
      },
      {
        title: "Complexidade Técnica",
        tag: "Complexidade",
      },
      {
        title: "Conhecimento / Incerteza",
        tag: "Incerteza",
      },
      {
        title: "Risco (Obstáculos / dependências)",
        tag: "Risco",
      },
    ];

    const labelsByValue = {
      1: "Mínimo",
      2: "Muito pequeno",
      3: "Pequeno",
      5: "Médio",
      8: "Grande",
      13: "Muito grande",
      21: "Extenso",
    };

    function buildUI() {
      const container = document.getElementById("questions");

      questions.forEach((q, qIndex) => {
        const qEl = document.createElement("div");
        qEl.className = "question";
        qEl.dataset.questionIndex = qIndex;

        const header = document.createElement("div");
        header.className = "question-header";

        const title = document.createElement("div");
        title.className = "question-title";
        title.textContent = q.title;

        const tag = document.createElement("div");
        tag.className = "question-tag";
        tag.textContent = q.tag;

        header.appendChild(title);
        header.appendChild(tag);

        const options = document.createElement("div");
        options.className = "options";

        fibValues.forEach((v) => {
          const btn = document.createElement("button");
          btn.type = "button";
          btn.className = "option-btn";
          btn.dataset.questionIndex = qIndex;
          btn.dataset.value = String(v);

          const spanValue = document.createElement("span");
          spanValue.className = "value";
          spanValue.textContent = v;

          const spanLabel = document.createElement("span");
          spanLabel.className = "label";
          spanLabel.textContent = labelsByValue[v] || "";

          btn.appendChild(spanValue);
          btn.appendChild(spanLabel);

          btn.addEventListener("click", () => {
            document
              .querySelectorAll(
                `.option-btn[data-question-index="${qIndex}"]`
              )
              .forEach((b) => b.classList.remove("selected"));
            btn.classList.add("selected");
          });

          options.appendChild(btn);
        });

        qEl.appendChild(header);
        qEl.appendChild(options);
        container.appendChild(qEl);
      });
    }

    function calculateAverage() {
      let total = 0;
      let count = 0;
      let unanswered = [];

      questions.forEach((q, index) => {
        const selected = document.querySelector(
          `.option-btn[data-question-index="${index}"].selected`
        );
        if (!selected) {
          unanswered.push(index + 1);
          return;
        }
        const value = parseInt(selected.dataset.value, 10);
        if (!Number.isNaN(value)) {
          total += value;
          count += 1;
        }
      });

      const averageEl = document.getElementById("average");
      const statusEl = document.getElementById("status");

      if (unanswered.length > 0) {
        statusEl.textContent =
          "Faltam respostas nas dimensões: " + unanswered.join(", ");
        averageEl.textContent = "–";
        return;
      }

      if (count === 0) {
        statusEl.textContent = "Selecione ao menos um valor.";
        averageEl.textContent = "–";
        return;
      }

      const avg = total / count;
      averageEl.textContent = avg.toFixed(2);
      statusEl.textContent =
        "Média numérica das escolhas (não arredondada para Fibonacci).";
    }

    document.addEventListener("DOMContentLoaded", () => {
      buildUI();
      document
        .getElementById("btn-calc")
        .addEventListener("click", calculateAverage);
    });
  </script>
</body>
</html>
